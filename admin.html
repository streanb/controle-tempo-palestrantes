<!DOCTYPE html>
<html>
<head>
  <title>Controlo de Palestrantes (Admin)</title>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";
    import { firebaseConfig } from './firebase-config.js';

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    let current = null;
    let remaining = 0;
    let interval = null;

    function updateDisplay() {
      document.getElementById('display').innerText = `${current}: ${remaining}s`;
      set(ref(db, 'tempo'), { palestrante: current, tempo: remaining });
    }

    window.startTimer = (p, tempo) => {
      clearInterval(interval);
      current = p;
      remaining = tempo;
      updateDisplay();
      interval = setInterval(() => {
        if (remaining > 0) {
          remaining--;
          updateDisplay();
        } else {
          clearInterval(interval);
        }
      }, 1000);
    };

    window.pauseTimer = () => clearInterval(interval);
    window.resetTimer = () => {
      clearInterval(interval);
      remaining = 0;
      updateDisplay();
    };
  </script>
</head>
<body>
  <h1>Admin: Controlar Tempo</h1>
  <select id="palestrante">
    <option value="P1">Palestrante 1</option>
    <option value="P2">Palestrante 2</option>
    <option value="P3">Palestrante 3</option>
    <option value="P4">Palestrante 4</option>
    <option value="P5">Palestrante 5</option>
  </select>
  <input id="tempo" type="number" value="60" /> segundos
  <button onclick="startTimer(document.getElementById('palestrante').value, parseInt(document.getElementById('tempo').value))">Iniciar</button>
  <button onclick="pauseTimer()">Pausar</button>
  <button onclick="resetTimer()">Reiniciar</button>
  <div id="display" style="margin-top:20px; font-size:2em;"></div>
</body>
</html>



