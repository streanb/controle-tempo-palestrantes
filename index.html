<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <title>Tempos dos Palestrantes</title>
    <script type="module">
      import { db } from "./firebase-config.js";
      import {
        ref,
        onValue
      } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

      const container = document.getElementById("tempos");

      function criarLinha(i) {
        const div = document.createElement("div");
        div.id = `p${i}`;
        div.innerHTML = `<h3>Palestrante ${i}</h3><p id="tempo${i}">00:00</p>`;
        container.appendChild(div);
      }

      for (let i = 1; i <= 5; i++) {
        criarLinha(i);
        const tempoRef = ref(db, "palestrante" + i);
        onValue(tempoRef, (snapshot) => {
          const dados = snapshot.val();
          const el = document.getElementById("tempo" + i);
          if (dados && typeof dados.tempoRestante !== "undefined") {
            el.textContent = dados.tempoRestante;
          } else {
            el.textContent = "00:00";
          }
        });
      }
    </script>
  </head>
  <body>
    <h1>Tempos dos Palestrantes</h1>
    <div id="tempos"></div>
  </body>
</html>
